2016-05-21 吉利的蓝
---

今天去的蓝面试，面了两个部门，java，真的是要眼泪掉下来。
两年工作经验的人了，一点积累没有，面试时还是和刚毕业一样被虐的体无完肤。问的问题，不管深浅，统统答不上来，一问三不知！
**宝宝很生气，宝宝很伤心**
第一个面试官问的问题挺好的，给了我新的学习方向，第二位虽然问的太基础，不过也情有可原，他只有信息表，没有看到简历。

把问到的问题记录在此，至少也算做个积累

1.`给30万用户每人发五张优惠券`
* 这个问题主要回答分发过程中优化的点
**最原始**的做法是从数据库中取出所有的用户ID，然后向优惠券表按每个用户ID五条优惠券记录插数据，**将执行150万次插入操作**，显然不可取。
* 第一个优化点，30万条用户ID，findAll()查询将**非常慢**，应该采用**分页查询**，例如每次只获取1000个ID。
* 第二点，优惠券表的插入操作**非常多**，一条条插，150万条同样耗时费性能，应该**批量插入**
* 第三点，**缓存**，那么多数据，即使分页查询依然很慢，在循环查询过程中可能有**新的用户注册**进来，将打乱原来的分页，这样会出现有的用户被**重复分发**到优惠券，所以要将用户ID缓存起来，查询时去缓存中查，避免了新用户的干扰，同时从缓存（内存）中查比从数据库（磁盘）中查更快
* 第四点，优惠券的插入即使使用批量插入，**依旧很慢，且用户ID的获取和优惠券记录的插入耗时不同**，所以需要使用**消息队列**，将批量插入任务push进消息队列，这样ID的查询只管查询，不用等待插入结束在进行下一次查询，而插入任务的消费也就可以用线程和线程池完成，更加省时且不那么占用CPU，同时也为界面显示*分发进度*提供依据，还可以方便为优惠券分发做日志

2.`SpringMVC的原理和流程`
* 分发器收到请求后对请求进行初步处理，然后根据处理程序映射找到处理程序控制器，然后调用处理程序处理请求，完成业务逻辑，然后调用视图解析器根据控制器返回的视图名称解析成视图对象，并进行响应处理

3.`spring的注入方式`
**三种注入方式**
* *构造器注入*，在类实例化时传入构造器参数赋值给被注入对象
* *setter注入*，在方法调用时，作为方法参数赋值给被注入对象
* *接口注入*，在类中引用调用类的接口，而接口的实现类交由容器去创建，并在实例化时注入

4.`ArrayList和HashSet的区别`
* *ArrayList*，有序，可重复，线程不安全
* *HashSet*，无序，不可重复，线程不安全

5.`Runable接口和Thread类哪个好`
* 这个没找到标准答案，只能说实现runable接口更方便资源共享,但是只有继承thread类才能满足更高的需求

2016-05-26 邦盛金融 风控
---
今天勉强，一些问题回答出来了，一些没有，比之前毫无头绪好点
部分问题纪录一下

1.`spring ioc原理 以及 为什么要ioc`
* 所有类在spring容器中登记，根据不同的注入方式在需要用的时候或创建或在容器中取出已创建的对象，使用反射赋值给相应的参数。
* 使用ioc是为了将对象之间解耦，原来一个对象在使用别的对象时需要管理依赖对象的创建和销毁，控制反转以后，依赖对象的创建和销毁不再是对象的工作，可以更专注于该对象需要实现的业务，在需要使用依赖对象的时候由spring容器注入进来。

2.`runnable和callable`
* runnable接口实现run方法，callable接口实现call方法。
* 都可以用来进行多线程编程。
* runnable开始新线程后想要知道线程的运行情况比较麻烦，如果要获取计算结果就必须使用共享变量，而callable可以返回一个泛型对象，获取计算结果，也可以通过future获取线程的运行状态或者结束线程。

2017-03-07 李方鹏 灵犀金融
---
1.`SpringMVC 相关问题：常用的注解标签有哪些？介绍MVC模式？`
* @Controller,@RequestMapping,@RequestBody,@ResponseBosy,@PathVariable,@AutoWire,@Qualifier,@Valid
* mvc模式：mvc就是把原本糅合在一起的数据、视图、和流程控制剥离开来，让分工不同的人更专心在自己的那一块。m就是模型，v就是视图，c就是控制器。如果部分离开，就会很重，就像最初用servlet，既要拼接html代码，又要处理业务逻辑，还要处理数据流转。而分开后，视图和模型可以复用，视图还可以交给更专业的人来编写，减轻了单个程序员的负担。之前有看到说最初mvc提出来时v和c都是要监听m的，这样才能做到，数据变化，相应视图和控制器都会变化。不过现在前后端分离越来越彻底，前端有了自己的mvc，后端的v越来越弱化，m和c则越来越来越细化。随着时代变化，同样叫mvc，但实际使用也会切合实际不断变化。

2.`HashMap的底层实现？有哪些特点？`        
* 数组加链表，通过hashcode计算数组偏移量。        
* 允许null值和空值作为键和值。线程不安全。数组扩张时会重新计算各个元素的存放位置，很耗时间，所以在能预测元素个数时，提前初始化到该大小。        

3.`数据结构及算法：有N级台阶，一次可以走一步或两步，问有多少种走法？`    

2017-05-09 功夫贷
---
1.`服务化和集群有什么区别`

2017-05-08 橙子科技
---
1.`java对象内存模型`

2.`java反射如何使用`

3.`java动态代理如何使用`

4.`spring原理，servlet和filter的区别`


2017-05-11 hr家        
---
##### jvm

1.`jvm是什么`

2.`jvm的参数`      

3.`jvm -service启动`
* jvm分为server启动和client启动，server模式启动较慢，但运行起来性能更好，因为当虚拟机运行在client模式时，虚拟机使用的是代号C1的轻量级编译器，而运行在server模式时使用的是较重的C2编译器，比C1编译得更彻底，服务起来后性能更高。
客户端启动次数多，启动慢体验不好，而服务器启动很少，一直提供服务，启动后的性能更重要

4.`怎么判断堆大小设置多少合适`        

5.`为什么会堆溢出`

6.`堆溢出怎么判断问题在哪里`
* 堆溢出会生成堆转储快照，分析快照，也可以使用jmv的命令行工具和可视化监视工具jconsole和VisualVM

7.`查看jvm状态的几个命令`
* jps 查看虚拟机进程
* jstat
* jinfo
* jmap
* jhat
* jstack
* hsdis

8.`jconsole怎么链接远程`
* jconsole启动界面设置好ip地址和端口，输入用户名密码即可

##### 线程
1.`怎么开多线程，run方法启动和start方法启动`

2.`怎么判断开多少线程`

3.`怎么查看cpu利用率`

4.`什么是线程安全`

5.`怎么做到线程安全`

6.`synchronized和锁什么区别`

###### linux命令
1.`查看命令是否存在`

2.`查找空文件夹`

3.`ls-la`

##### 数据库